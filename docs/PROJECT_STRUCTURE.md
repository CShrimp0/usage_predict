# é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

## ğŸ“ ç›®å½•ç»„ç»‡åŸåˆ™

æœ¬é¡¹ç›®é‡‡ç”¨**ä»£ç -ç»“æœ-æƒé‡åˆ†ç¦»**çš„ç›®å½•ç»“æ„ï¼Œä¾¿äºGitç‰ˆæœ¬æ§åˆ¶å’Œåä½œï¼š

- **ä»£ç æ–‡ä»¶**ï¼šå®Œå…¨çº³å…¥Gitç®¡ç†ï¼Œå¯è‡ªç”±æäº¤æ¨é€
- **è®­ç»ƒç»“æœ**ï¼šå­˜æ”¾äºä¸“ç”¨ç›®å½•ï¼Œå¯é€‰æ‹©æ€§ä¸Šä¼ é‡è¦ç»“æœ
- **æ¨¡å‹æƒé‡**ï¼šå®Œå…¨æ’é™¤åœ¨Gitä¹‹å¤–ï¼Œä½¿ç”¨å¤–éƒ¨å­˜å‚¨å¤‡ä»½

---

## ğŸ—‚ï¸ å®Œæ•´ç›®å½•ç»“æ„

```
usage_predict/
â”‚
â”œâ”€â”€ ğŸ“„ æ ¸å¿ƒä»£ç æ–‡ä»¶ï¼ˆGit è·Ÿè¸ªï¼‰
â”‚   â”œâ”€â”€ train_mae.py           # ç»Ÿä¸€è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ model.py               # æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ dataset.py             # æ•°æ®é›†åŠ è½½
â”‚   â”œâ”€â”€ evaluate.py            # æ¨¡å‹è¯„ä¼°
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”‚   â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                   # æ–‡æ¡£ç›®å½•ï¼ˆGit è·Ÿè¸ªï¼‰
â”‚   â”œâ”€â”€ TRAINING_GUIDE.md      # è®­ç»ƒæŒ‡å—
â”‚   â”œâ”€â”€ DATASET_OPTIMIZATION.md # æ•°æ®é›†ä¼˜åŒ–è¯´æ˜
â”‚   â”œâ”€â”€ PROJECT_STRUCTURE.md   # æœ¬æ–‡æ¡£
â”‚   â””â”€â”€ directory_structure.txt # ç›®å½•æ ‘ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ ğŸ“‚ scripts/                # å·¥å…·è„šæœ¬ï¼ˆGit è·Ÿè¸ªï¼‰
â”‚   â”œâ”€â”€ migrate_structure.sh   # ç›®å½•è¿ç§»è„šæœ¬
â”‚   â”œâ”€â”€ upload_results.sh      # ç»“æœä¸Šä¼ è„šæœ¬
â”‚   â”œâ”€â”€ analyze_dataset.py     # æ•°æ®é›†åˆ†æ
â”‚   â”œâ”€â”€ verify_no_leakage.py   # æ•°æ®æ³„æ¼æ£€æŸ¥
â”‚   â”œâ”€â”€ visualize_image_sizes.py # å›¾åƒå°ºå¯¸å¯è§†åŒ–
â”‚   â””â”€â”€ plot_age_error.py      # å¹´é¾„è¯¯å·®åˆ†æ
â”‚
â”œâ”€â”€ ğŸ“‚ results/                # è®­ç»ƒç»“æœï¼ˆé€‰æ‹©æ€§è·Ÿè¸ªï¼‰
â”‚   â”œâ”€â”€ summary/               # ç»“æœæ‘˜è¦ï¼ˆGit è·Ÿè¸ª âœ“ï¼‰
â”‚   â”‚   â”œâ”€â”€ analysis_summary.txt
â”‚   â”‚   â”œâ”€â”€ DATA_LEAKAGE_FIX_SUMMARY.md
â”‚   â”‚   â””â”€â”€ *.csv              # æ•°æ®åˆ†æç»“æœ
â”‚   â”‚
â”‚   â”œâ”€â”€ figures/               # å¯è§†åŒ–å›¾è¡¨ï¼ˆé€‰æ‹©æ€§è·Ÿè¸ªï¼‰
â”‚   â”‚   â”œâ”€â”€ best_training_curves.png  # æœ€ä½³è®­ç»ƒæ›²çº¿
â”‚   â”‚   â”œâ”€â”€ age_vs_error.png          # å¹´é¾„è¯¯å·®åˆ†æ
â”‚   â”‚   â””â”€â”€ true_vs_pred.png          # é¢„æµ‹æ•£ç‚¹å›¾
â”‚   â”‚
â”‚   â””â”€â”€ best_results/          # æœ€ä½³æ¨¡å‹ç»“æœï¼ˆGit è·Ÿè¸ª âœ“ï¼‰
â”‚       â”œâ”€â”€ config.json        # æœ€ä½³æ¨¡å‹é…ç½®
â”‚       â””â”€â”€ history.json       # è®­ç»ƒå†å²
â”‚
â”œâ”€â”€ ğŸ“‚ weights/                # æ¨¡å‹æƒé‡ï¼ˆGit å¿½ç•¥ âœ—ï¼‰
â”‚   â”œâ”€â”€ README.md              # æƒé‡ç®¡ç†è¯´æ˜
â”‚   â””â”€â”€ *.pth                  # æƒé‡æ–‡ä»¶ï¼ˆä¸ä¸Šä¼ ï¼‰
â”‚
â”œâ”€â”€ ğŸ“‚ outputs/                # å®Œæ•´è®­ç»ƒè¾“å‡ºï¼ˆGit å¿½ç•¥ âœ—ï¼‰
â”‚   â”œâ”€â”€ run_20250127_143022/   # å•æ¬¡è®­ç»ƒè¿è¡Œ
â”‚   â”‚   â”œâ”€â”€ config.json        # è®­ç»ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ history.json       # è®­ç»ƒå†å²
â”‚   â”‚   â”œâ”€â”€ best_model.pth     # æœ€ä½³æ¨¡å‹æƒé‡
â”‚   â”‚   â”œâ”€â”€ checkpoint_epoch_*.pth  # æ£€æŸ¥ç‚¹
â”‚   â”‚   â”œâ”€â”€ training_curves.png # è®­ç»ƒæ›²çº¿
â”‚   â”‚   â””â”€â”€ predict_result/    # é¢„æµ‹ç»“æœå¯è§†åŒ–
â”‚   â”‚
â”‚   â””â”€â”€ run_*/                 # å…¶ä»–è®­ç»ƒè¿è¡Œ
â”‚
â”œâ”€â”€ ğŸ“‚ data/                   # æ•°æ®é›†ï¼ˆGit å¿½ç•¥ âœ—ï¼‰
â”‚   â””â”€â”€ TA/
â”‚       â”œâ”€â”€ Healthy/
â”‚       â””â”€â”€ Pathological/
â”‚
â””â”€â”€ ğŸ“„ .gitignore              # Gitå¿½ç•¥è§„åˆ™

```

---

## ğŸ¯ æ–‡ä»¶ç±»å‹ä¸Gitç­–ç•¥

### âœ… å§‹ç»ˆä¸Šä¼ ï¼ˆè‡ªåŠ¨è·Ÿè¸ªï¼‰

| æ–‡ä»¶ç±»å‹ | ä½ç½® | è¯´æ˜ |
|---------|------|------|
| Pythonè„šæœ¬ | `*.py` | æ‰€æœ‰ä»£ç æ–‡ä»¶ |
| é…ç½®æ–‡ä»¶ | `requirements.txt` | ä¾èµ–ç®¡ç† |
| æ–‡æ¡£ | `docs/*.md` | é¡¹ç›®æ–‡æ¡£ |
| æœ€ä½³ç»“æœé…ç½® | `results/best_results/*.json` | æœ€ä½³æ¨¡å‹çš„é…ç½®å’Œå†å² |
| ç»“æœæ‘˜è¦ | `results/summary/*` | æ–‡æœ¬ã€CSVã€Markdownæ‘˜è¦ |

### âš ï¸ é€‰æ‹©æ€§ä¸Šä¼ ï¼ˆæ‰‹åŠ¨å†³å®šï¼‰

| æ–‡ä»¶ç±»å‹ | ä½ç½® | å»ºè®® |
|---------|------|------|
| å¯è§†åŒ–å›¾è¡¨ | `results/figures/*.png` | ç²¾é€‰å…³é”®å›¾è¡¨ä¸Šä¼  |
| è®­ç»ƒé…ç½® | `results/best_results/config.json` | ä»…ä¸Šä¼ æœ€ä½³æ¨¡å‹é…ç½® |

### âŒ æ°¸ä¸ä¸Šä¼ ï¼ˆè‡ªåŠ¨å¿½ç•¥ï¼‰

| æ–‡ä»¶ç±»å‹ | ä½ç½® | åŸå›  |
|---------|------|------|
| æ¨¡å‹æƒé‡ | `weights/*.pth`, `outputs/*/*.pth` | æ–‡ä»¶è¿‡å¤§ï¼ˆGBçº§åˆ«ï¼‰ |
| å®Œæ•´è®­ç»ƒæ—¥å¿— | `outputs/run_*/` | åŒ…å«å¤§é‡ä¸­é—´æ–‡ä»¶ |
| æ•°æ®æ–‡ä»¶ | `data/`, `*.xlsx`, `*.csv` | åŸå§‹æ•°æ®ä¸åº”å…¥åº“ |
| ç¼“å­˜æ–‡ä»¶ | `__pycache__/`, `*.pyc` | Pythonç¼“å­˜ |

---

## ğŸš€ ä½¿ç”¨å·¥ä½œæµ

### 1. é¦–æ¬¡è®¾ç½®ï¼ˆå·²å®Œæˆï¼‰

```bash
cd /home/szdx/LNX/usage_predict

# è¿è¡Œè¿ç§»è„šæœ¬ï¼ˆæ•´ç†ç°æœ‰æ–‡ä»¶ï¼‰
bash scripts/migrate_structure.sh

# æ£€æŸ¥GitçŠ¶æ€
git status
```

### 2. æ—¥å¸¸è®­ç»ƒ

```bash
# è®­ç»ƒæ¨¡å‹ï¼ˆæƒé‡è‡ªåŠ¨ä¿å­˜åˆ° weights/ï¼‰
python train_mae.py --epochs 100

# è®­ç»ƒç»“æœä½äº:
#   - outputs/run_*/          # å®Œæ•´æ—¥å¿—ï¼ˆä¸ä¸Šä¼ ï¼‰
#   - weights/model_*.pth     # æœ€ä½³æƒé‡ï¼ˆä¸ä¸Šä¼ ï¼‰
```

### 3. æäº¤ä»£ç 

```bash
# æ·»åŠ æ‰€æœ‰ä»£ç å˜æ›´
git add *.py docs/ scripts/ requirements.txt

# æäº¤
git commit -m "Feature: æ–°å¢æ•°æ®å¢å¼ºç­–ç•¥"

# æ¨é€åˆ°è¿œç¨‹
git push origin main
```

### 4. é€‰æ‹©æ€§ä¸Šä¼ ç»“æœ

```bash
# ä½¿ç”¨ç»“æœä¸Šä¼ è„šæœ¬ï¼ˆäº¤äº’å¼é€‰æ‹©ï¼‰
bash scripts/upload_results.sh

# æˆ–æ‰‹åŠ¨æ·»åŠ 
git add results/best_results/config.json
git add results/figures/best_training_curves.png
git commit -m "Results: æ›´æ–°æœ€ä½³æ¨¡å‹ç»“æœï¼ˆMAE=6.89ï¼‰"
```

---

## ğŸ“‹ .gitignore è§„åˆ™æ‘˜è¦

```gitignore
# Pythonç¼“å­˜
__pycache__/
*.pyc

# æ¨¡å‹æƒé‡ï¼ˆå®Œå…¨å¿½ç•¥ï¼‰
*.pth
*.pt
weights/

# è®­ç»ƒè¾“å‡ºï¼ˆå®Œå…¨å¿½ç•¥ï¼‰
outputs/
run_*/

# æ•°æ®æ–‡ä»¶ï¼ˆå®Œå…¨å¿½ç•¥ï¼‰
data/
*.xlsx
*.csv

# å…è®¸ç‰¹å®šè·¯å¾„
!results/summary/
!results/best_results/
!*.md
!*.py

# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
.vscode/
```

---

## ğŸ”§ ç»´æŠ¤æŒ‡å—

### æ¸…ç†æ—§çš„è®­ç»ƒè¾“å‡º

```bash
# æŸ¥çœ‹outputs/å ç”¨ç©ºé—´
du -sh outputs/

# åˆ é™¤æ—§çš„è®­ç»ƒè¿è¡Œï¼ˆä¿ç•™æœ€è¿‘3æ¬¡ï¼‰
cd outputs/
ls -t | tail -n +4 | xargs rm -rf
```

### å¤‡ä»½é‡è¦æƒé‡

```bash
# æ‰‹åŠ¨å¤åˆ¶æœ€ä½³æƒé‡åˆ°weights/
cp outputs/run_20250127_143022/best_model.pth \
   weights/model_resnet50_mae6.89_production.pth

# ä½¿ç”¨äº‘å­˜å‚¨å¤‡ä»½weights/
# ä¾‹å¦‚ï¼šrsyncã€rcloneã€äº‘ç›˜ç­‰
```

### æ·»åŠ æ–°çš„å¯è§†åŒ–å›¾è¡¨

```bash
# ç”Ÿæˆæ–°å›¾è¡¨åï¼Œå¤åˆ¶åˆ°results/figures/
cp outputs/run_latest/new_plot.png results/figures/

# é€‰æ‹©æ€§æ·»åŠ åˆ°Git
git add results/figures/new_plot.png
git commit -m "Visualization: æ–°å¢XXXåˆ†æå›¾"
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæƒé‡ä¸ä¸Šä¼ åˆ°Gitï¼Ÿ

**A:** Gitä¸é€‚åˆå­˜å‚¨å¤§å‹äºŒè¿›åˆ¶æ–‡ä»¶ï¼š
- å•ä¸ªæƒé‡æ–‡ä»¶å¯è¾¾100MB-1GB
- æ¯æ¬¡æäº¤éƒ½ä¼šä¿ç•™å†å²ï¼Œä»“åº“ä¼šè¿…é€Ÿè†¨èƒ€
- å…‹éš†å’Œæ‹‰å–ä¼šå˜å¾—ææ…¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨Git LFSï¼ˆLarge File Storageï¼‰- é€‚åˆå°å›¢é˜Ÿ
- ä½¿ç”¨å¯¹è±¡å­˜å‚¨ï¼ˆS3ã€OSSï¼‰- é€‚åˆç”Ÿäº§ç¯å¢ƒ
- ä½¿ç”¨å®éªŒå®¤æœåŠ¡å™¨å…±äº«å­˜å‚¨

### Q2: å¦‚ä½•å…±äº«è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Ÿ

**A:** æ¨èæ–¹æ¡ˆï¼š
1. ä¸Šä¼ æƒé‡åˆ°äº‘ç›˜ï¼ˆç™¾åº¦ç½‘ç›˜ã€é˜¿é‡Œäº‘ç›˜ï¼‰
2. åœ¨ `results/best_results/README.md` ä¸­è®°å½•ï¼š
   - æ¨¡å‹é…ç½®ï¼ˆå·²åœ¨ config.jsonï¼‰
   - æ€§èƒ½æŒ‡æ ‡ï¼ˆMAEã€RMSEï¼‰
   - æƒé‡ä¸‹è½½é“¾æ¥
   - ä½¿ç”¨è¯´æ˜

### Q3: results/ä¸­çš„å“ªäº›æ–‡ä»¶åº”è¯¥ä¸Šä¼ ï¼Ÿ

**A:** å»ºè®®ä¸Šä¼ ï¼š
- âœ… `results/summary/*` - æ‰€æœ‰æ‘˜è¦æ–‡ä»¶ï¼ˆä½“ç§¯å°ï¼‰
- âœ… `results/best_results/*` - æœ€ä½³æ¨¡å‹é…ç½®ï¼ˆæ— æƒé‡ï¼‰
- âš ï¸ `results/figures/*` - ç²¾é€‰å…³é”®å›¾è¡¨ï¼ˆ2-5å¼ ï¼‰

ä¸å»ºè®®ä¸Šä¼ ï¼š
- âŒ æ‰€æœ‰è®­ç»ƒè¿‡ç¨‹å›¾è¡¨ï¼ˆæ•°é‡å¤ªå¤šï¼‰
- âŒ ä¸­é—´å®éªŒç»“æœ

### Q4: ä¸å°å¿ƒæŠŠæƒé‡æ–‡ä»¶addäº†æ€ä¹ˆåŠï¼Ÿ

```bash
# ä»æš‚å­˜åŒºç§»é™¤ï¼ˆä¿ç•™æœ¬åœ°æ–‡ä»¶ï¼‰
git reset HEAD weights/*.pth

# å¦‚æœå·²ç»commitä½†æœªpush
git reset --soft HEAD~1

# å¦‚æœå·²ç»pushåˆ°è¿œç¨‹ï¼ˆéœ€è¦force pushï¼‰
git filter-branch --tree-filter 'rm -f weights/*.pth' HEAD
git push --force
```

---

## ğŸ“Š ç›®å½•ç©ºé—´ç®¡ç†

### å…¸å‹ç©ºé—´å ç”¨

| ç›®å½• | é¢„ä¼°å¤§å° | å¢é•¿é€Ÿåº¦ | æ¸…ç†ç­–ç•¥ |
|------|---------|---------|---------|
| `outputs/` | 20-50GB | å¿«é€Ÿ | å®šæœŸåˆ é™¤æ—§è¿è¡Œ |
| `weights/` | 1-5GB | ä¸­ç­‰ | ä»…ä¿ç•™æœ€ä½³æ¨¡å‹ |
| `results/` | 100-500MB | ç¼“æ…¢ | å®šæœŸå½’æ¡£ |
| `data/` | 5-10GB | é™æ€ | ä¸æ¸…ç† |

### è‡ªåŠ¨æ¸…ç†è„šæœ¬ï¼ˆå¯é€‰ï¼‰

```bash
#!/bin/bash
# æ¸…ç†è¶…è¿‡30å¤©çš„è®­ç»ƒè¾“å‡º
find outputs/ -type d -name "run_*" -mtime +30 -exec rm -rf {} \;

# æ¸…ç†è¶…è¿‡7å¤©çš„æ£€æŸ¥ç‚¹
find outputs/ -name "checkpoint_epoch_*.pth" -mtime +7 -delete
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [è®­ç»ƒæŒ‡å—](TRAINING_GUIDE.md) - è¯¦ç»†çš„è®­ç»ƒé…ç½®å’Œå‚æ•°è¯´æ˜
- [æ•°æ®é›†ä¼˜åŒ–](DATASET_OPTIMIZATION.md) - æ•°æ®åˆ’åˆ†å’Œå¢å¼ºç­–ç•¥
- [README.md](../README.md) - é¡¹ç›®æ€»è§ˆ

---

**æœ€åæ›´æ–°**: 2025-01-27  
**ç»´æŠ¤è€…**: Research Team
