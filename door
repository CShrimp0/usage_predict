# ============================================================================
# è¶…å‚æ•°ä¼˜åŒ–å®éªŒè®¡åˆ’ - ç²¾ç®€ç‰ˆ
# åˆ›å»ºæ—¥æœŸ: 2026-01-06
# æ€»å®éªŒæ•°: 31ä¸ª (10ä¸ªé˜¶æ®µ)
# 
# âš™ï¸ ç³»ç»Ÿé…ç½®:
# CPU: 2Ã—Intel Xeon Gold 6530 (128çº¿ç¨‹)
# å†…å­˜: 754GB
# GPU: 6Ã—RTX 4090
# 
# ğŸ“ æ–°çš„å‚æ•°çº¦å®š:
# - å¹´é¾„åˆ†å±‚æŠ½æ ·: å·²å†…ç½®é»˜è®¤å¯ç”¨ï¼Œæ— éœ€æŒ‡å®š --use-age-stratify
# - num-workers: é»˜è®¤8ï¼Œæ— éœ€æŒ‡å®š
# 
# ğŸ’¡ æ‰§è¡Œé¡ºåº: é˜¶æ®µ1â†’2â†’3â†’4â†’5 (æ ¸å¿ƒ) â†’ é˜¶æ®µ6-9 (å¾®è°ƒ) â†’ é˜¶æ®µ10 (é›†æˆ)
# ============================================================================

# ============================================================================
# é˜¶æ®µ1: BASELINEæµ‹è¯• (1ä¸ªå®éªŒï¼Œé¢„è®¡1-2å°æ—¶)
# è¯´æ˜: å»ºç«‹åŸºçº¿
# ============================================================================

# BASELINE
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.5 \
    --lr 0.0001 \
    --weight-decay 0.0001 \
    --loss mae \
    --seed 42

# ============================================================================
# é˜¶æ®µ2: Dropoutç³»ç»Ÿæµ‹è¯• (5ä¸ªå®éªŒï¼Œå¯6GPUå¹¶è¡Œï¼Œé¢„è®¡2-3å°æ—¶)
# è¯´æ˜: æ‰¾åˆ°æœ€ä¼˜Dropoutå€¼ (é¢„æœŸ0.3æˆ–0.4)
# ============================================================================

# å®éªŒ2.1: Dropout=0.2
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.2 \
    --lr 0.0001 \
    --weight-decay 0.0001 \
    --loss mae \
    --seed 42

# å®éªŒ2.2: Dropout=0.3 (æ¨èâ­â­â­â­)
CUDA_VISIBLE_DEVICES=1 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.0001 \
    --loss mae \
    --seed 42

# å®éªŒ2.3: Dropout=0.4
CUDA_VISIBLE_DEVICES=2 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.4 \
    --lr 0.0001 \
    --weight-decay 0.0001 \
    --loss mae \
    --seed 42

# å®éªŒ2.4: Dropout=0.6
CUDA_VISIBLE_DEVICES=3 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.6 \
    --lr 0.0001 \
    --weight-decay 0.0001 \
    --loss mae \
    --seed 42

# å®éªŒ2.5: Dropout=0.7
CUDA_VISIBLE_DEVICES=4 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.7 \
    --lr 0.0001 \
    --weight-decay 0.0001 \
    --loss mae \
    --seed 42

# ============================================================================
# é˜¶æ®µ3: Weight Decayä¼˜åŒ– (3ä¸ªå®éªŒï¼Œé¢„è®¡2-3å°æ—¶)
# è¯´æ˜: ç»“åˆé˜¶æ®µ2æœ€ä¼˜Dropout (å‡è®¾0.3)
# ============================================================================

# å®éªŒ3.1: WeightDecay=1e-5 (æ¨èâ­â­â­â­)
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ3.2: WeightDecay=5e-5
CUDA_VISIBLE_DEVICES=1 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00005 \
    --loss mae \
    --seed 42

# å®éªŒ3.3: WeightDecay=1e-3
CUDA_VISIBLE_DEVICES=2 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.001 \
    --loss mae \
    --seed 42

# ============================================================================
# é˜¶æ®µ4: æ¨¡å‹æ¶æ„å¯¹æ¯” (6ä¸ªå®éªŒï¼Œå¼ºçƒˆæ¨è6GPUå¹¶è¡Œï¼Œé¢„è®¡2-3å°æ—¶)
# è¯´æ˜: æ‰¾åˆ°æœ€é€‚åˆçš„æ¨¡å‹æ¶æ„
# ============================================================================

# å®éªŒ4.1: EfficientNet-B0 (æ¨èâ­â­â­â­)
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model efficientnet_b0 \
    --batch-size 96 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ4.2: EfficientNet-B1 (æ¨èâ­â­â­â­â­)
CUDA_VISIBLE_DEVICES=1 python train.py \
    --model efficientnet_b1 \
    --batch-size 96 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --image-size 240 \
    --seed 42

# å®éªŒ4.3: EfficientNet-B2
CUDA_VISIBLE_DEVICES=2 python train.py \
    --model efficientnet_b2 \
    --batch-size 64 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --image-size 260 \
    --seed 42

# å®éªŒ4.4: ConvNeXt-Tiny (æ¨èâ­â­â­â­â­)
CUDA_VISIBLE_DEVICES=3 python train.py \
    --model convnext_tiny \
    --batch-size 64 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ4.5: MobileNetV3
CUDA_VISIBLE_DEVICES=4 python train.py \
    --model mobilenet_v3 \
    --batch-size 96 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ4.6: RegNet
CUDA_VISIBLE_DEVICES=5 python train.py \
    --model regnet \
    --batch-size 64 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# ============================================================================
# é˜¶æ®µ5: å­¦ä¹ ç‡è°ƒä¼˜ (3ä¸ªå®éªŒï¼Œé¢„è®¡2-3å°æ—¶)
# è¯´æ˜: åŸºäºé˜¶æ®µ4æœ€ä¼˜æ¨¡å‹æ¶æ„
# ============================================================================

# å®éªŒ5.1: LR=5e-5 (ä¿å®ˆ)
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.00005 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ5.2: LR=2e-4 (æ¿€è¿›ï¼Œæ¨èâ­â­â­â­)
CUDA_VISIBLE_DEVICES=1 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0002 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ5.3: LR=3e-4 (å¾ˆæ¿€è¿›)
CUDA_VISIBLE_DEVICES=2 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0003 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# ============================================================================
# é˜¶æ®µ6: å›¾åƒå°ºå¯¸æµ‹è¯• (2ä¸ªå®éªŒï¼Œé¢„è®¡2-3å°æ—¶)
# è¯´æ˜: æµ‹è¯•æ›´å¤§å›¾åƒå°ºå¯¸çš„æ•ˆæœ
# ============================================================================

# å®éªŒ6.1: å›¾åƒå°ºå¯¸256
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --image-size 256 \
    --seed 42

# å®éªŒ6.2: å›¾åƒå°ºå¯¸256
CUDA_VISIBLE_DEVICES=1 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --image-size 256 \
    --seed 42

# ============================================================================
# é˜¶æ®µ7: æŸå¤±å‡½æ•°å¯¹æ¯” (3ä¸ªå®éªŒï¼Œé¢„è®¡2-3å°æ—¶)
# è¯´æ˜: è¯„ä¼°ä¸åŒæŸå¤±å‡½æ•°
# ============================================================================

# å®éªŒ7.1: SmoothL1 Loss
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss smoothl1 \
    --seed 42

# å®éªŒ7.2: Huber Loss
CUDA_VISIBLE_DEVICES=1 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss huber \
    --seed 42

# å®éªŒ7.3: MSE Loss
CUDA_VISIBLE_DEVICES=2 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mse \
    --seed 42

# ============================================================================
# é˜¶æ®µ8: Batch Sizeä¼˜åŒ– (3ä¸ªå®éªŒï¼Œé¢„è®¡2-3å°æ—¶)
# è¯´æ˜: å¹³è¡¡è®­ç»ƒç¨³å®šæ€§
# ============================================================================

# å®éªŒ8.1: BatchSize=16 (å°æ‰¹æ¬¡)
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model resnet50 \
    --batch-size 16 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ8.2: BatchSize=64 (ä¸­æ‰¹æ¬¡)
CUDA_VISIBLE_DEVICES=1 python train.py \
    --model resnet50 \
    --batch-size 64 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ8.3: BatchSize=96 (å¤§æ‰¹æ¬¡)
CUDA_VISIBLE_DEVICES=2 python train.py \
    --model resnet50 \
    --batch-size 96 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# ============================================================================
# é˜¶æ®µ9: æœ€ä¼˜é…ç½®ç»„åˆ (3ä¸ªå®éªŒï¼Œé¢„è®¡2-3å°æ—¶)
# è¯´æ˜: åŸºäºå‰8é˜¶æ®µç»“æœï¼Œç»„åˆæœ€ä¼˜å‚æ•°
# ============================================================================

# å®éªŒ9.1: ResNet50 + æœ€ä¼˜å‚æ•°
CUDA_VISIBLE_DEVICES=0 python train.py \
    --model resnet50 \
    --batch-size 32 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ9.2: EfficientNet-B1 + æœ€ä¼˜å‚æ•° (æ¨èâ­â­â­â­â­)
CUDA_VISIBLE_DEVICES=1 python train.py \
    --model efficientnet_b1 \
    --batch-size 96 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --image-size 256 \
    --seed 42

# å®éªŒ9.3: ConvNeXt-Tiny + æœ€ä¼˜å‚æ•° (æ¨èâ­â­â­â­â­)
CUDA_VISIBLE_DEVICES=2 python train.py \
    --model convnext_tiny \
    --batch-size 64 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --image-size 256 \
    --seed 42

# ============================================================================
# é˜¶æ®µ10: é›†æˆå­¦ä¹  (2ä¸ªå®éªŒï¼Œé¢„è®¡3-4å°æ—¶)
# è¯´æ˜: æœ€ç»ˆå†²åˆºï¼Œçªç ´å•æ¨¡å‹æ€§èƒ½ä¸Šé™
# ============================================================================

# å®éªŒ10.1: 3æ¨¡å‹é›†æˆ (æ¨èâ­â­â­â­â­)
python train.py \
    --ensemble \
    --ensemble-models resnet50 efficientnet_b1 convnext_tiny \
    --ensemble-gpus 0 1 2 \
    --batch-size 96 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# å®éªŒ10.2: 6æ¨¡å‹å…¨é›†æˆ (æ¨èâ­â­â­â­â­)
python train.py \
    --ensemble \
    --ensemble-models resnet50 efficientnet_b0 efficientnet_b1 convnext_tiny mobilenet_v3 regnet \
    --ensemble-gpus 0 1 2 3 4 5 \
    --batch-size 96 \
    --dropout 0.3 \
    --lr 0.0001 \
    --weight-decay 0.00001 \
    --loss mae \
    --seed 42

# ============================================================================
# ğŸ’¡ ä½¿ç”¨æç¤º
# ============================================================================
# 1. é€é˜¶æ®µè¿è¡Œï¼Œä¸è¦ä¸€æ¬¡æ€§å¯åŠ¨æ‰€æœ‰å®éªŒ
# 2. æ¯é˜¶æ®µå®ŒæˆåæŸ¥çœ‹ outputs/run_*/history.json æ‰¾åˆ°æœ€ä½Val MAE
# 3. åå°è¿è¡Œ: command1 & command2 & command3 &
# 4. ç›‘æ§GPU: watch -n 1 nvidia-smi
# 5. æŸ¥çœ‹æ—¥å¿—: tail -f outputs/run_YYYYMMDD_HHMMSS/training.log
#
# å¿«é€Ÿå¯¹æ¯”æ‰€æœ‰ç»“æœï¼ˆæŒ‰MAEæ’åºï¼‰:
# python << 'EOF'
# import json
# from pathlib import Path
# results = []
# for p in Path('outputs').glob('run_*/history.json'):
#     with open(p) as f:
#         h = json.load(f)
#     results.append((p.parent.name, min(h['val_mae'])))
# for name, mae in sorted(results, key=lambda x: x[1]):
#     print(f'{name}: MAE={mae:.3f}')
# EOF
# ============================================================================
